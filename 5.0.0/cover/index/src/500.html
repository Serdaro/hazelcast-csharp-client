<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\a\hazelcast-csharp-client\hazelcast-csharp-client\src\Hazelcast.Net\Models\HLocalDate.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
// Copyright (c) 2008-2021, Hazelcast, Inc. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

using System;
using System.Text.RegularExpressions;

namespace Hazelcast.Models
{
    /// &lt;summary&gt;
    /// Represents Hazelcast SQL &lt;c&gt;DATE&lt;/c&gt; type corresponding to &lt;c&gt;java.time.LocalDate&lt;/c&gt; in Java.
    /// &lt;/summary&gt;
    public readonly struct HLocalDate : IEquatable&lt;HLocalDate&gt;
    {
        private static readonly Regex ParseRegex = new Regex(
            @&quot;^(?&#39;year&#39;-?\d+)-(?&#39;month&#39;\d+)-(?&#39;day&#39;\d+)$&quot;,
            RegexOptions.Compiled | RegexOptions.ExplicitCapture
        );

        public const int MaxYear = 999_999_999;
        public const int MinYear = -999_999_999;

        public static readonly HLocalDate Max = new HLocalDate(MinYear, 12, 31);
        public static readonly HLocalDate Min = new HLocalDate(MaxYear, 1, 1);

        /// &lt;summary&gt;
        /// Year value. Ranges between &lt;see cref=&quot;MinYear&quot;/&gt; and &lt;see cref=&quot;MaxYear&quot;/&gt; inclusive.
        /// &lt;/summary&gt;
        public int Year { get; }

        /// &lt;summary&gt;
        /// Month value. Ranges between 1 and 12 inclusive.
        /// &lt;/summary&gt;
        public byte Month { get; }

        /// &lt;summary&gt;
        /// Day value. Ranges between 1 and max number of days in given &lt;see cref=&quot;Year&quot;/&gt; and &lt;see cref=&quot;Month&quot;/&gt; inclusive.
        /// &lt;/summary&gt;
        public byte Day { get; }

        public HLocalDate(int year, byte month, byte day)
        {
            if (year &lt; MinYear || year &gt; MaxYear)
                throw new ArgumentOutOfRangeException(nameof(year), $@&quot;Year must be between {MinYear} and {MaxYear}.&quot;);
            if (month &lt; 1 || month &gt; 12)
                throw new ArgumentOutOfRangeException(nameof(month), @&quot;Month must be between 1 and 12.&quot;);
            if (day &lt; 1 || day &gt; 31 || day &gt; DateTime.DaysInMonth(year % 4 + 4, month))
                throw new ArgumentOutOfRangeException(nameof(day), @&quot;Day must be between 1 and number of days in provided month.&quot;);

            Year = year;
            Month = month;
            Day = day;
        }

        public HLocalDate(DateTime dateTime)
        {
            Year = dateTime.Year;
            Month = (byte)dateTime.Month;
            Day = (byte)dateTime.Day;
        }

        public DateTime ToDateTime() =&gt; new DateTime(Year, Month, Day, 0, 0, 0, DateTimeKind.Local);

        public bool TryToDateTime(out DateTime dateTime)
        {
            dateTime = default;

            if (Year &lt; 1 || Year &gt; 9999)
                return false;

            dateTime = ToDateTime();
            return true;
        }

        public static explicit operator DateTime(HLocalDate localDate) =&gt; localDate.ToDateTime();
        public static explicit operator HLocalDate(DateTime dateTime) =&gt; new HLocalDate(dateTime);

        public override string ToString() =&gt; $&quot;{Year:D4}-{Month:D2}-{Day:D2}&quot;;

        public static bool TryParse(string s, out HLocalDate localDate)
        {
            localDate = default;

            var match = ParseRegex.Match(s);
            if (!match.Success ||
                !int.TryParse(match.Groups[&quot;year&quot;].Value, out var year) ||
                !byte.TryParse(match.Groups[&quot;month&quot;].Value, out var month) ||
                !byte.TryParse(match.Groups[&quot;day&quot;].Value, out var day)
            )
            {
                return false;
            }

            localDate = new HLocalDate(year, month, day);
            return true;
        }

        public static HLocalDate Parse(string s)
        {
            return TryParse(s, out var localDate)
                ? localDate
                : throw new FormatException($&quot;Failed to parse \&quot;{s}\&quot; as {nameof(HLocalDate)}.&quot;);
        }

        #region Equality members

        public bool Equals(HLocalDate other)
        {
            return Year == other.Year &amp;&amp; Month == other.Month &amp;&amp; Day == other.Day;
        }

        public override bool Equals(object obj)
        {
            return obj is HLocalDate other &amp;&amp; Equals(other);
        }

        public override int GetHashCode()
        {
            return HashCode.Combine(Year, Month, Day);
        }

        public static bool operator ==(HLocalDate left, HLocalDate right)
        {
            return left.Equals(right);
        }

        public static bool operator !=(HLocalDate left, HLocalDate right)
        {
            return !left.Equals(right);
        }

        #endregion

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[25,9,28,11,1],[33,9,33,81,1],[34,9,34,79,1],[39,27,39,31,1],[44,29,44,33,1],[49,27,49,31,1],[53,13,53,50,1],[54,17,54,120,0],[55,13,55,41,1],[56,17,56,106,0],[57,13,57,88,1],[58,17,58,132,0],[60,13,60,25,1],[61,13,61,27,1],[62,13,62,23,1],[63,9,63,10,1],[67,13,67,34,1],[68,13,68,42,1],[69,13,69,38,1],[70,9,70,10,1],[72,41,72,100,1],[76,13,76,32,0],[78,13,78,41,0],[79,17,79,30,0],[81,13,81,37,0],[82,13,82,25,0],[85,75,85,97,1],[86,74,86,98,1],[88,46,88,78,1],[92,13,92,33,1],[94,13,94,45,1],[95,13,99,14,1],[101,17,101,30,0],[104,13,104,58,1],[105,13,105,25,1],[110,13,112,98,1],[119,13,119,83,1],[124,13,124,61,0],[129,13,129,55,0],[134,13,134,39,0],[139,13,139,40,0]]);
    </script>
  </body>
</html>